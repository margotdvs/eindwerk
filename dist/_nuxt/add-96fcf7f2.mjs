var h=Object.defineProperty,b=Object.defineProperties;var f=Object.getOwnPropertyDescriptors;var s=Object.getOwnPropertySymbols;var g=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var l=(t,e,a)=>e in t?h(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,r=(t,e)=>{for(var a in e||(e={}))g.call(e,a)&&l(t,a,e[a]);if(s)for(var a of s(e))w.call(e,a)&&l(t,a,e[a]);return t},u=(t,e)=>b(t,f(e));import{_ as v,k as c,l as y,u as m,m as _,r as k,o as x,c as S,b as i,w as T,T as A,R as I,a as C}from"./entry-cf580ef6.mjs";const E={name:"AddGame",data(){return{tagInput:c(A),reviewInput:c(I),data:{status:"draft",name:"",title_image:[],score:"",tags:[],description_short:"",review:[{subtitle:"Historias volare in cubiculum!1",text:"Whisk each side of the cabbage with twenty tablespoons of cucumber. 11",image:null},{subtitle:"Historias volare in cubiculum!2",text:"Whisk each side of the cabbage with twenty tablespoons of cucumber. 22",image:null},{subtitle:"Historias volare in cubiculum!3",text:"Whisk each side of the cabbage with twenty tablespoons of cucumber. 33",image:null}]}}},computed:r({},y(m,["accessToken"])),methods:u(r({},_(m,["logout"])),{uploadFile(t){if(!t)return Promise.resolve(null);const e=new FormData;return e.append("title",t.name),e.append("file",t.file),fetch("https://margot.fullstacksyntra.be/files",{method:"POST",headers:{Authorization:`Bearer ${this.accessToken}`},body:e}).then(a=>{if(a.status===401)throw new Error("401");if(!a.ok)throw new Error("Could not upload file");return a.json()}).then(a=>a.data.id)},save(t){this.uploadFile(t.title_image[0]).then(e=>(t.title_image=e,fetch("https://margot.fullstacksyntra.be/items/games",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.accessToken}`},body:JSON.stringify(t)}))).then(e=>{if(e.status===401)throw new Error("401");if(!e.ok)throw new Error("Could not upload file");if(!e.ok)throw new Error("Could not upload file");return e.json()}).then(e=>{console.log(e)}).catch(e=>{e.message==="401"&&this.logout(),console.error(e)})}})},j=C("h1",null,"Add Game",-1);function B(t,e,a,F,n,d){const o=k("FormKit");return x(),S("div",null,[j,i(o,{modelValue:n.data,"onUpdate:modelValue":e[0]||(e[0]=p=>n.data=p),type:"form","submit-label":"Save",onSubmit:d.save},{default:T(()=>[i(o,{type:"select",label:"Status",name:"status",options:{draft:"Draft",published:"Published",archived:"Archived"}}),i(o,{type:"text",name:"name",label:"Game title",validation:"required"}),i(o,{type:"file",name:"title_image",label:"Title image",accept:".jpg, .jpeg .png"}),i(o,{type:"number",name:"score",label:"score",min:"1",max:"10",validation:"required"}),i(o,{"inner-class":"no-background",type:n.tagInput,name:"tags",label:"Tags"},null,8,["type"]),i(o,{type:"textarea",name:"description_short",label:"Short description",maxlength:"450",validation:"required"}),i(o,{type:n.reviewInput,name:"review",label:"Review","inner-class":"no-background"},null,8,["type"])]),_:1},8,["modelValue","onSubmit"])])}var q=v(E,[["render",B]]);export{q as default};
